/* !
 * Tiny Accessibility Checker Plugin
 *
 * Copyright (c) 2023 Ephox Corporation DBA Tiny Technologies, Inc.
 * Licensed under the Tiny commercial license. See https://www.tiny.cloud/legal/
 *
 * Version: 7.5.1-113
 */

!function(){"use strict";const e=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(r=o=e,(a=String).prototype.isPrototypeOf(r)||(null===(n=o.constructor)||void 0===n?void 0:n.name)===a.name)?"string":t;var r,o,a,n})(t)===e,t=e=>t=>typeof t===e,r=e("string"),o=e("object"),a=e("array"),n=t("boolean"),i=(void 0,e=>undefined===e);const s=e=>!(e=>null==e)(e),l=t("function"),c=t("number"),u=()=>{},d=e=>()=>e,p=e=>e,h=(e,t)=>e===t;function m(e,...t){return(...r)=>{const o=t.concat(r);return e.apply(null,o)}}const y=e=>e(),g=d(!1),v=d(!0);class w{constructor(e,t){this.tag=e,this.value=t}static some(e){return new w(!0,e)}static none(){return w.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?w.some(e(this.value)):w.none()}bind(e){return this.tag?e(this.value):w.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:w.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return s(e)?w.some(e):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);const b=Array.prototype.slice,f=Array.prototype.indexOf,k=Array.prototype.push,x=(e,t)=>((e,t)=>f.call(e,t))(e,t)>-1,A=(e,t)=>{for(let r=0,o=e.length;r<o;r++)if(t(e[r],r))return!0;return!1},C=(e,t)=>{const r=e.length,o=new Array(r);for(let a=0;a<r;a++){const r=e[a];o[a]=t(r,a)}return o},T=(e,t)=>{for(let r=0,o=e.length;r<o;r++)t(e[r],r)},D=(e,t)=>{const r=[];for(let o=0,a=e.length;o<a;o++){const a=e[o];t(a,o)&&r.push(a)}return r},I=(e,t,r)=>(T(e,((e,o)=>{r=t(r,e,o)})),r),_=(e,t,r)=>{for(let o=0,a=e.length;o<a;o++){const a=e[o];if(t(a,o))return w.some(a);if(r(a,o))break}return w.none()},S=(e,t)=>_(e,t,g),N=(e,t)=>(e=>{const t=[];for(let r=0,o=e.length;r<o;++r){if(!a(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);k.apply(t,e[r])}return t})(C(e,t)),O=e=>{const t=b.call(e,0);return t.reverse(),t},E=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},R=()=>{const e=(e=>{const t=E(w.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(w.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(w.some(e))}}})(u);return{...e,on:t=>e.get().each(t)}},W=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},M=(e,t)=>{const r=(t||document).createElement(e);return W(r)},H=W,q=(e,t)=>{const r=e.dom;if(1!==r.nodeType)return!1;{const e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},P=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,$=(e,t)=>e.dom===t.dom,G="undefined"!=typeof window?window:Function("return this;")(),L=(e,t)=>((e,t)=>{let r=null!=t?t:G;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r})(e.split("."),t),j=Object.getPrototypeOf,B=e=>{const t=L("ownerDocument.defaultView",e);return o(e)&&((e=>((e,t)=>{const r=((e,t)=>L(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(j(e).constructor.name))},V=e=>t=>(e=>e.dom.nodeType)(t)===e,F=e=>z(e)&&B(e.dom),z=V(1),U=V(3),K=V(11),X=e=>t=>z(t)&&t.dom.nodeName.toLowerCase()===e,Y=e=>H(e.dom.ownerDocument),J=e=>w.from(e.dom.parentNode).map(H),Q=e=>w.from(e.dom.previousSibling).map(H),Z=e=>O(((e,t)=>{const r=[],o=e=>(r.push(e),t(e));let a=t(e);do{a=a.bind(o)}while(a.isSome());return r})(e,Q)),ee=e=>C(e.dom.childNodes,H),te=e=>((e,t)=>{const r=e.dom.childNodes;return w.from(r[0]).map(H)})(e),re=e=>H(e.dom.host),oe=e=>{const t=H((e=>{if(s(e.target)){const t=H(e.target);if(z(t)&&s(t.dom.shadowRoot)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return((e,t)=>0<e.length?w.some(e[0]):w.none())(t)}}return w.from(e.target)})(e).getOr(e.target)),r=()=>e.stopPropagation(),o=()=>e.preventDefault(),a=(n=o,i=r,(...e)=>n(i.apply(null,e)));var n,i;return((e,t,r,o,a,n,i)=>({target:e,x:t,y:r,stop:o,prevent:a,kill:n,raw:i}))(t,e.clientX,e.clientY,r,o,a,e)},ae=(e,t,r,o)=>{e.dom.removeEventListener(t,r,o)},ne=v,ie=(e,t,r)=>((e,t,r,o)=>((e,t,r,o,a)=>{const n=((e,t)=>r=>{e(r)&&t(oe(r))})(r,o);return e.dom.addEventListener(t,n,a),{unbind:m(ae,e,t,n,a)}})(e,t,r,o,!1))(e,t,ne,r),se=e=>{const t=U(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const r=t.ownerDocument;return(e=>{const t=(e=>H(e.dom.getRootNode()))(e);return K(r=t)&&s(r.dom.host)?w.some(t):w.none();var r})(H(t)).fold((()=>r.body.contains(t)),(o=se,a=re,e=>o(a(e))));var o,a},le=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return H(t)},ce=(e,t)=>((e,r)=>D(ee(e),(e=>q(e,t))))(e),ue=(e,t)=>((e,t)=>{const r=void 0===t?document:t.dom;return P(r)?[]:C(r.querySelectorAll(e),H)})(t,e),de=(e,t,r)=>{let o=e.dom;const a=l(r)?r:g;for(;o.parentNode;){o=o.parentNode;const e=H(o);if(t(e))return w.some(e);if(a(e))break}return w.none()},pe=(e,t)=>S(e.dom.childNodes,(e=>t(H(e)))).map(H),he=(e,t,r)=>de(e,(e=>q(e,t)),r),me=(e,t)=>pe(e,(e=>q(e,t))),ye=(e,t)=>((e,t)=>{const r=void 0===t?document:t.dom;return P(r)?w.none():w.from(r.querySelector(e)).map(H)})(t,e),ge=(e,t,r)=>((e,t,r,o,a)=>((e,t)=>q(e,t))(r,o)?w.some(r):l(a)&&a(r)?w.none():t(r,o,a))(0,he,e,t,r),ve=e=>parseInt(e,10),we=(e,t)=>{const r=e-t;return 0===r?0:r>0?1:-1},be=(e,t,r)=>({major:e,minor:t,patch:r}),fe=e=>{const t=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(e);return t?be(ve(t[1]),ve(t[2]),ve(t[3])):be(0,0,0)},ke=d("html4"),xe=d("html5"),Ae=d("a"),Ce=d("aa"),Te=d("aaa"),De=e=>t=>t.options.get(e),Ie=De("a11ychecker_css_url"),_e=De("a11ychecker_level"),Se=De("a11ychecker_html_version"),Ne=De("a11ychecker_issue_url_callback"),Oe=De("a11ychecker_filter_issue"),Ee=e=>{var t;return null!==(t=e.options.get("a11ychecker_allow_decorative_images"))&&void 0!==t?t:e.options.get("a11y_advanced_options")},Re=tinymce.util.I18n,We={"a11y.d1.description":"This paragraph looks like a heading. If it is a heading, please select a heading level.","a11y.d1.repair.block.h1":"Heading 1","a11y.d1.repair.block.h2":"Heading 2","a11y.d1.repair.block.h3":"Heading 3","a11y.d1.repair.block.h4":"Heading 4","a11y.d1.repair.block.h5":"Heading 5","a11y.d1.repair.block.h6":"Heading 6","a11y.d1.repair.info":"Select a heading level:","a11y.d2.description":"Headings must be applied in sequential order. For example: Heading 1 should be followed by Heading 2, not Heading 3.","a11y.d3.description":"Adjacent links with the same URL should be merged into one link","a11y.d4.description":"The selected text appears to be a list. Lists should be formatted using a list tag.","a11y.d5a.description":"Large text must have a contrast ratio of at least 3:1","a11y.d5b.description":"Text must have a contrast ratio of at least 4.5:1","a11y.d5c.description":"Text must have a contrast ratio of at least 7:1","a11y.h93.description":"ID attribute must be unique","a11y.h93.repair.info":"Make ID unique","a11y.h93.repair.deduplicate.others":"Keep this ID and remove all others","a11y.h93.repair.deduplicate.this":"Remove this ID","a11y.h93.repair.deduplicate.all":"Remove all IDs","a11y.i1.description.decorativeAllowed":"Images must be marked as decorative or have an alternative text description","a11y.i1.description.decorativeNotAllowed":"Images must have an alternative text description. Decorative images are not allowed.","a11y.i1.repair.errors.duplicate":"Alternative text cannot be the same as the filename","a11y.i1.repair.errors.empty":"Alternative text cannot be empty","a11y.i1.repair.info.decorativeAllowed":"Or provide alternative text:","a11y.i1.repair.info.decorativeNotAllowed":"Provide alternative text:","a11y.i1.repair.checkboxlabel":"Make image decorative:","a11y.i1.repair.checkboxtext":"Image is decorative","a11y.i2.description":"Alternative text must not be the same as the image filename","a11y.i2.repair.info":"Provide alternative text:","a11y.i3.description":"Image alternative text should be less than 100 characters","a11y.i3.repair.error":"Alternative text is {0} characters","a11y.t1.description":"Tables must have captions","a11y.t1.repair.errors.duplicate":"Table caption cannot be the same as the table summary","a11y.t1.repair.errors.empty":"Caption cannot be empty","a11y.t1.repair.info":"Provide caption:","a11y.t2.description":"Complex tables should have summaries","a11y.t2.repair.errors.duplicate":"Table summary cannot be the same as the table caption","a11y.t2.repair.errors.empty":"Summary cannot be empty","a11y.t2.repair.info":"Provide table summary:","a11y.t3.description":"Table caption and summary cannot have the same value","a11y.t4a.description":"Table elements must contain TR and TD tags","a11y.t4b.description":"Tables must have at least one header cell","a11y.t4b.repair.info":"Choose table header:","a11y.t4c.description":"Table headers must be applied to a row or a column","a11y.t4c.repair.header.col":"Header column","a11y.t4c.repair.header.row":"Header row","a11y.t4c.repair.info":"Select header scope:","a11y.t4c.repair.scope.col":"Column","a11y.t4c.repair.scope.colgroup":"Column group","a11y.t4c.repair.scope.row":"Row","a11y.t4c.repair.scope.rowgroup":"Row group","a11y.widget.counter":"Issue {0} of {1}","a11y.widget.ignore":"Ignore","a11y.widget.issue.none":"No accessibility issues detected","a11y.widget.next":"Next issue","a11y.widget.previous":"Previous issue","a11y.widget.legacyrepair":"Repair issue","a11y.widget.repair":"Repair","a11y.widget.title":"Accessibility Checker","a11y.widget.help.title":"Click for more info","a11y.control.tooltip":"Accessibility checker","a11y.control.menutext":"Accessibility checker...",error:"Error",warning:"Warning",info:"Info",success:"Success"},Me=e=>We[e],He=e=>Array.isArray(e)?Re.translate([Me(e[0]),...e.slice(1)]):Re.translate(Me(e)),qe=Object.keys,Pe=Object.hasOwnProperty,$e=(e,t)=>{const r=qe(e);for(let o=0,a=r.length;o<a;o++){const a=r[o];t(e[a],a)}},Ge=e=>(t,r)=>{e[r]=t},Le=(e,t)=>Pe.call(e,t),je=(e,t,o)=>{((e,t,o)=>{if(!(r(o)||n(o)||c(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")})(e.dom,t,o)},Be=(e,t)=>{const r=e.dom.getAttribute(t);return null===r?void 0:r},Ve=(e,t)=>w.from(Be(e,t)),Fe=(e,t)=>{e.dom.removeAttribute(t)},ze=(e=>{const t="ephox-foam".replace(/\./g,"-");return{resolve:e=>t+"-"+e}})().resolve,Ue=(e,t,r)=>{je(e,t,r)},Ke=(e,t,r)=>{Fe(e,t),Fe(e,r)},Xe=e=>{const t=e.editor;return{start:t=>{((e,t,r,o,a,n)=>{T(e,(e=>{const r=((e,t,r,o)=>{switch(e){case"info":return w.some(t);case"warning":return w.some(r);case"error":return w.some(o);default:return w.none()}})(e.severity,o,a,n).toArray().concat([t]);T(r,(t=>{je(e.element,t,1)}))})),w.from(e[0]).each((e=>{Ue(e.element,r,e.severity)}))})(t,e.violation,e.current,e.info,e.warn,e.error)},moveTo:(r,o)=>{((e,t,r,o)=>{const a=ue(e,"["+t+"]");T(a,(e=>{Fe(e,t)})),Ue(r,t,o)})(H(t.getBody()),e.current,r,o)},stop:()=>{((e,t,r,o,a,n)=>{const i=ue(e,"["+t+"]");T(i,(e=>{T([t,r,o,a,n],(t=>{Fe(e,t)})),Ke(e,t,r)}))})(H(t.getBody()),e.violation,e.current,e.info,e.warn,e.error)},exclude:t=>{Ke(t,e.violation,e.current)}}},Ye="data-"+ze("a11y-current-violation"),Je="data-"+ze("a11y-violation"),Qe="data-"+ze("a11y-severity-info"),Ze="data-"+ze("a11y-severity-warn"),et="data-"+ze("a11y-severity-error"),tt="data-"+ze("accessibility-ignore"),rt=d(tt),ot=(e,t=!1)=>{return se(e)?e.dom.isContentEditable:(r=e,ge(r,"[contenteditable]")).fold(d(t),(e=>"true"===at(e)));var r},at=e=>e.dom.contentEditable,nt=e=>{const t=(e=>de(e,F).exists(ot))(e);return t&&F(e)&&ot(e)},it=(e,t)=>D(e.querySelectorAll(t),(e=>nt(H(e)))),st=(e,t,r,o)=>N(t,(t=>"I1"===t.id?t.check(e,o,r)?[{rule:t,element:e}]:[]:t.check(e,o)?[{rule:t,element:e}]:[])),lt=(e,t)=>{var r,o;let a=[];const n=((e,t)=>{const r=[],o=[];for(let t=0,n=e.length;t<n;t++){const n=e[t];(a=n,a.walkable?r:o).push(n)}var a;return{pass:r,fail:o}})(e.rules),s=i(e.ignoreSelectors)?[]:e.ignoreSelectors,l=n.pass,c=n.fail,u=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null);for(;u.nextNode();){const t=H(u.currentNode);if(!A(s,(e=>q(t,e)))&&F(t)&&nt(t)){const o=st(t.dom,l,e.allowDecorativeImages,null!==(r=e.ignoreSelectors)&&void 0!==r?r:[]);a=a.concat(o)}}const d=((e,t,r)=>N(t,(t=>C(t.check(e,r),(e=>({rule:t,element:e}))))))(t,c,null!==(o=e.ignoreSelectors)&&void 0!==o?o:[]);return a=a.concat(d),a.sort(((e,t)=>((e,t)=>e===t?0:((e,t)=>((e,t,r)=>0!=(e.compareDocumentPosition(t)&r))(e,t,Node.DOCUMENT_POSITION_PRECEDING))(e,t)?1:-1)(e.element,t.element))),a},ct=(e,t)=>ye(e,t).isSome(),ut=d("error"),dt=d("warning"),pt=(e,t)=>{const r=e;return r.matches?r.matches(t):r.webkitMatchesSelector?r.webkitMatchesSelector(t):r.mozMatchesSelector?r.mozMatchesSelector(t):!!r.msMatchesSelector&&r.msMatchesSelector(t)},ht=e=>e.length>0,mt=((e,t)=>{const r=t=>e(t)?w.from(t.dom.nodeValue):w.none();return{get:t=>{if(!e(t))throw new Error("Can only get text value of a text node");return r(t).getOr("")},getOption:r,set:(t,r)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=r}}})(U),yt=(e,t)=>wt(e,t).isSome(),gt=(e,t)=>((e,t)=>A(t,(t=>q(e,t))))(e,t)?te(e).bind((e=>gt(e,t))):w.some(e),vt=e=>{return(t=e,mt.getOption(t)).filter((e=>ht(e.trim())));var t},wt=(e,t)=>pe(e,(e=>vt(e).orThunk((()=>{const r=gt(e,t).getOr(e);return vt(r)})).isSome())),bt="strong,b",ft=(e,t,r)=>wt(e,r).fold((()=>((e,t)=>{for(let r=0,o=e.length;r<o;++r)if(!0!==t(e[r]))return!1;return!0})(ee(e),(e=>ft(e,t,r)))),(e=>((e,t)=>he(e,bt,(e=>$(e,t))).isSome())(e,t))),kt={id:"D1",wcag:"1.3.1",severity:dt(),desckey:"a11y.d1.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H42.html",walkable:!0,check:(e,t)=>{const r=H(e);return!(!pt(e,"p")||!ct(r,bt))&&ft(r,r,t)},levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},xt={id:"D2",wcag:"1.3.1",severity:ut(),desckey:"a11y.d2.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G141.html",walkable:!1,check:e=>{const t=it(e,"h1,h2,h3,h4,h5,h6");let r;const o=[];return T(t,(e=>{const t=parseInt(e.tagName.slice(1),10);r&&t-r>1&&o.push(e),r=t})),o},levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},At={id:"D3",wcag:"2.4.4",severity:ut(),desckey:"a11y.d3.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H2.html",walkable:!1,check:e=>{const t=H(e),r=ue(t,"a + a"),o=D(r,(e=>{const t=O(Z(e));return _(t,X("a"),(e=>{return!(U(t=e)&&(r=(e=>mt.get(e))(t).replace(/[\u200B-\u200D\uFEFF]/g,""),!ht(r)));var t,r})).exists((t=>t.dom.href===e.dom.href))&&nt(e)}));return C(o,(e=>e.dom))},levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},Ct=(e,t)=>{const r=e.nodeName,o=((e,t)=>{let r=e.nextSibling;for(;null!==r&&(t&&"#text"===r.nodeName||"BR"===r.nodeName);)r=r.nextSibling;return r})(e,t);return null!==o&&o.nodeName===r&&o},Tt=(e,t,r)=>{const o=[];if(t(e)){o.push(e);let a=Ct(e,r);for(;!1!==a&&t(a);)o.push(a),a=Ct(a,r)}return o},Dt=(e,t)=>{let r=-1;for(let o=0;o<e.length;o++)if(e[o]===t){r=o;break}return r},It=(e,t)=>{const r=it(e,"p,h1,h2,h3,h4,h5,h6"),o=[];let a=0;for(;a<r.length;){const e=r[a],n=Tt(e,t,!0);if(n.length>1){o.push(e);const t=n[n.length-1],i=Dt(r,t);a=-1===i?a+1:i}else s(e.firstChild)?(Tt(e.firstChild,t,!1).length>1&&o.push(e),a++):a++}return o},_t=e=>{var t;return s(null===(t=e.textContent)||void 0===t?void 0:t.match(/^\s{0,}([a-z1-9]|i+)\s{0,}[.)-]/gim))},St={id:"D4o",wcag:"1.3.1",severity:ut(),desckey:"a11y.d4.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H48.html",walkable:!1,check:e=>It(e,_t),levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},Nt=e=>{var t;return s(null===(t=e.textContent)||void 0===t?void 0:t.match(/^\s{0,}(\*|-)\s{0,}/gim))},Ot={id:"D4u",wcag:"1.3.1",severity:ut(),desckey:"a11y.d4.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H48.html",walkable:!1,check:e=>It(e,Nt),levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},Et=(e,t)=>{const r=e.dom,o=window.getComputedStyle(r).getPropertyValue(t);return""!==o||se(e)?o:Rt(r,t)},Rt=(e,t)=>(e=>void 0!==e.style&&l(e.style.getPropertyValue))(e)?e.style.getPropertyValue(t):"",Wt=(e,t,r,o)=>({red:e,green:t,blue:r,alpha:o}),Mt=e=>{const t=e=>e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),r=e.red/255,o=e.green/255,a=e.blue/255;return.2126*t(r)+.7152*t(o)+.0722*t(a)},Ht=(e,t)=>{const r=e.alpha+t.alpha*(1-e.alpha),o=(e.red*e.alpha+t.red*t.alpha*(1-e.alpha))/r,a=(e.green*e.alpha+t.green*t.alpha*(1-e.alpha))/r,n=(e.blue*e.alpha+t.blue*t.alpha*(1-e.alpha))/r;return Wt(Math.ceil(o),Math.ceil(a),Math.ceil(n),r)},qt=e=>{const t=(e,t,r,o)=>{const a=parseInt(e,10),n=parseInt(t,10),i=parseInt(r,10),s=parseFloat(o);return w.some(Wt(a,n,i,s))};if("transparent"===e)return t("0","0","0","0");const r=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/.exec(e);if(null!==r)return t(r[1],r[2],r[3],"1");const o=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/.exec(e);return null!==o?t(o[1],o[2],o[3],o[4]):w.none()},Pt=(e,t)=>{const r=parseFloat(Et(e,"opacity"));return r<1?Wt(t.red,t.green,t.blue,t.alpha*r):t},$t=(e,t)=>Gt(e).filter((e=>e<t)).isSome(),Gt=e=>{const t=(e=>{const t=Y(e),r=le(t),o=[e].concat(((e,t)=>{const r=l(t)?t:g;let o=e.dom;const a=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){const e=o.parentNode,t=H(e);if(a.push(t),!0===r(t))break;o=e}return a})(e,(e=>$(e,r)))),a=I(o,((e,t)=>{if(1===e.alpha)return e;const r=Et(t,"background-color");return qt(r).bind((r=>{const o=Pt(t,r);return o.alpha>0?w.some(Ht(e,o)):w.none()})).getOr(e)}),Wt(0,0,0,0));return a.alpha<1?Ht(a,Wt(255,255,255,1)):a})(e);return((e,t)=>{const r=Et(e,"color");return qt(r).bind((r=>{const o=Pt(e,r),a=o.alpha<1?Ht(o,t):o;return w.some(a)}))})(e,t).map((e=>{const r=Mt(t);return((e,t)=>(Math.max(e,t)+.05)/(Math.min(e,t)+.05))(Mt(e),r)}))},Lt={id:"D5c",wcag:"1.4.3",severity:ut(),desckey:"a11y.d5c.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G17.html",walkable:!0,check:(e,t)=>{const r=H(e);return yt(r,t)&&$t(r,7)},levels:[Te()],htmlversions:[ke(),xe()]},jt=e=>{const t=Et(e,"font-size"),r=new RegExp(".*px").test(t),o=/(\d*\.?\d*)(.*)/.exec(t);return r&&null!==o?w.some(Number(o[1])):w.none()},Bt=e=>{const t=(e=>{const t=Et(e,"font-weight");return!("bold"!==t&&"bolder"!==t)||!!/^[0-9]*$/.test(r=t)&&parseInt(r,10)>=700;var r})(e),r=Y(e),o=le(r),a=jt(o);return jt(e).fold(g,(e=>a.fold((()=>e>=24||t&&e>=19),(r=>e>=1.5*r||t&&e>=1.2*r))))},Vt={id:"D5a",wcag:"1.4.3",severity:ut(),desckey:"a11y.d5a.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G145.html",walkable:!0,check:(e,t)=>{const r=H(e);return yt(r,t)&&Bt(r)&&$t(r,3)},levels:[Ce()],htmlversions:[ke(),xe()]},Ft={id:"D5b",wcag:"1.4.3",severity:ut(),desckey:"a11y.d5b.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G18.html",walkable:!0,check:(e,t)=>{const r=H(e);return yt(r,t)&&!Bt(r)&&$t(r,4.5)},levels:[Ce()],htmlversions:[ke(),xe()]},zt={id:"H93",wcag:"4.1.1",severity:ut(),desckey:"a11y.h93.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H93.html",walkable:!1,check:e=>{const t=H(e),r=ue(t,"*[id]"),o=I(r,((e,t)=>{const r=Be(t,"id");if(void 0!==r&&nt(t)){if(Le(e.problems,r))return e;if(Le(e.ids,r)){const t=e.ids[r];return{...e,problems:{...e.problems,[r]:t}}}return{...e,ids:{...e.ids,[r]:t.dom}}}return e}),{ids:{},problems:{}});return((e,t)=>{const r=[];return $e(e,((e,o)=>{r.push(t(e,o))})),r})(o.problems,p)},levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},Ut=X("img"),Kt={id:"I1",wcag:"1.1.1",severity:ut(),desckey:"a11y.i1.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G95.html",walkable:!0,check:(e,t,r)=>{const o=H(e);if(!Ut(o))return!1;const a=Ve(o,"alt"),n=a.isSome(),i=a.exists((e=>""===e.trim())),s=((e,t,r=h)=>e.exists((e=>r(e,t))))(Ve(o,"role"),"presentation");return!n||(r?n&&i&&!s||n&&!i&&s:i||s)},levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},Xt={id:"I2",wcag:"1.1.1",severity:ut(),desckey:"a11y.i2.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G95.html",walkable:!0,check:e=>(e=>pt(e,"img[alt][src]"))(e)&&e.src.split("/").pop()===e.alt.split("/").pop(),levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},Yt={id:"I3",wcag:"N/A",severity:dt(),desckey:"a11y.i3.description",url:"",walkable:!0,check:e=>{const t=H(e);return!!Ut(t)&&Ve(t,"alt").exists((e=>e.length>100))},levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},Jt={id:"T1",wcag:"1.3.1",severity:ut(),desckey:"a11y.t1.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H39.html",walkable:!0,check:e=>{if(pt(e,"table")){const t=e.querySelector("caption");return!t||pt(t,":empty")}return!1},levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},Qt={id:"T2",wcag:"1.3.1",severity:dt(),desckey:"a11y.t2.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H73.html",walkable:!0,check:e=>pt(e,"table")&&s(e.querySelector("[rowspan]")||e.querySelector("[colspan]"))&&!e.hasAttribute("summary"),levels:[Ae(),Ce(),Te()],htmlversions:[ke()]},Zt={id:"T3",wcag:"1.3.1",severity:ut(),desckey:"a11y.t3.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H73.html",walkable:!0,check:e=>{if(pt(e,"table")&&e.hasAttribute("summary")){const t=e.querySelectorAll("caption");return t.length>0&&e.getAttribute("summary")===t[0].innerHTML}return!1},levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},er={id:"T4b",wcag:"1.3.1",severity:ut(),desckey:"a11y.t4b.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H51.html",walkable:!0,check:e=>"table"===e.nodeName.toLowerCase()&&0===e.querySelectorAll("th").length,levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},tr={id:"T4c",wcag:"1.3.1",severity:ut(),desckey:"a11y.t4c.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H63.html",walkable:!0,check:e=>{return!("th"!==e.nodeName.toLowerCase()||(t=e).hasAttribute("scope")&&/row|col|rowgroup|colgroup/i.test(t.getAttribute("scope")));var t},levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},rr=(e,t)=>0===e.querySelectorAll(t).length,or={id:"T4a",wcag:"1.3.1",severity:ut(),desckey:"a11y.t4a.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H51.html",walkable:!0,check:e=>{return"table"===e.nodeName.toLowerCase()&&(rr(t=e,"tr")||rr(t,"td"));var t},levels:[Ae(),Ce(),Te()],htmlversions:[ke(),xe()]},ar=e=>({id:e.id.toUpperCase(),severity:e.severity,url:e.url,description:He(e.description),element:e.element.dom}),nr=e=>{const t=(e=>{const t=(e=>{const t=e.options.get("a11ychecker_ignored_rules");return N(tinymce.explode(t),(e=>e.length>0?[e.toUpperCase()]:[]))})(e),r=_e(e),o=Se(e);return{rules:D([kt,xt,At,St,Ot,Vt,Ft,Lt,zt,Kt,Xt,Yt,Jt,Qt,Zt,tr,or,er],(e=>!x(t,e.id.toUpperCase())&&x(e.levels,r)&&x(e.htmlversions,o))),allowDecorativeImages:Ee(e),ignoreSelectors:["img[data-mce-placeholder]","[data-mce-bogus=all] *","[data-mce-bogus]","[data-mce-mergetag-affix]"]}})(e);(e=>{e.on("init",(()=>{T([tt,Je,Qe,Ze,et,Ye],(t=>{e.serializer.addTempAttr(t)}))}))})(e);const r=E(!1),o=(e=>Xe({editor:e,violation:Je,current:Ye,info:Qe,warn:Ze,error:et}))(e),a=rt();let n=[],i=0;const s=()=>{const r=lt(t,e.getBody()),o=((e,t)=>C(t,(t=>{const r=t.rule;return{id:r.id.toUpperCase(),description:"I1"!==r.id?r.desckey:Ee(e)?`${r.desckey}.decorativeAllowed`:`${r.desckey}.decorativeNotAllowed`,element:H(t.element),url:r.url,severity:r.severity}})))(e,r);return D(o,(t=>{const r=(n=t.element,Ve(n,a).map((e=>e.split(" "))).getOr([])),o=Oe(e);var n;return!x(r,t.id)&&o(ar(t))}))},l=t=>(i+=t,i=i<0?i+n.length:i%n.length,o.moveTo(n[i].element,n[i].severity),e.selection.scrollIntoView(n[i].element.dom),{summaryLabel:He(["a11y.widget.counter",i+1,n.length]),issue:n[i],index:i+1}),c=()=>n.length>0?w.some(l(0)):w.none(),u=()=>{r.set(!0),n=s(),i=0},d=()=>{o.stop(),r.set(!1),i=0,n=[]};return{scan:()=>((e=>{e.dispatch("A11ycheckStart")})(e),u(),o.start(n),c()),stepIssue:l,getIssues:()=>n.slice(0),getCurrent:c,getReport:()=>{const e=r.get();try{return e||u(),C(n,ar)}finally{e||d()}},resolveCurrent:t=>(t&&(((e,t,r)=>{const o=Ve(e,t).map((e=>e.concat(" ",r))).getOr(r);je(e,t,o)})(n[i].element,a,n[i].id),(e=>{e.dispatch("A11ycheckIgnore")})(e)),n=s(),c()),clear:d,isAuditing:()=>r.get()}},ir=(e,t)=>{const r=t.ui.registry.getAll().icons;return w.from(r[e]).orThunk((()=>w.from(r["temporary-placeholder"]))).getOr("!not found!")},sr={success:"checkmark",info:"info",warning:"notice",error:"warning"},lr=(e,t,r,o,a)=>{const n=He(r),i=He(t);return`<div class="accessibility-issue__description"><div><div><div class="tox-icon">${ir(sr[r],e)}</div><h2>${n}</h2></div><p>${i}</p></div><div>`+((e,t,r)=>{const o=`<a href="${r}" data-mce-tooltip="${He("a11y.widget.help.title")}" class="tox-button tox-button--naked tox-button--icon tox-button--more-info-a11ychecker-link" target="_blank" data-alloy-tabstop="true" tabindex="-1"><div class="tox-icon">${ir(e,t)}</div></a>`;return"help"===e?o:`<div class="tox-icon">${ir(e,t)}</div>`})(o,e,a)+"</div></div>"},cr=(e,t,r,o)=>({type:"listbox",label:t,name:e,items:C(r,(e=>({text:o(e.text),value:e.value})))}),ur=(e,t)=>({type:"input",name:e,label:t}),dr=(e,t,r)=>({type:"label",label:t,items:[{type:"checkbox",name:e,label:r}]}),pr=(e,t)=>({title:He("a11y.widget.title"),body:{type:"panel",items:[{type:"panel",classes:["tox-accessibility-issue","accessibility-issue--success"],items:[{type:"htmlpanel",html:lr(e,"a11y.widget.issue.none","success","checkmark"),presets:"presentation"}]}]},buttons:[{type:"submit",name:"ok",text:"OK",primary:!0}],onSubmit:e=>e.close(),onClose:t}),hr=(e,t,r)=>{e.redial(t),e.focus(r)};var mr;!function(e){e.Next="next",e.Prev="prev",e.Ignore="ignore",e.Ok="ok",e.Repair="repair"}(mr||(mr={}));const yr=({issue:e,summaryLabel:t},r,o,a,n,i)=>{const s=Ne(n),l=e=>yr(e,r,o,w.none(),n,i),c=a=>(s,{name:c})=>{if(c===mr.Next||c===mr.Prev){const e=r.stepIssue(c===mr.Next?1:-1);hr(s,l(e),c)}else c===mr.Ignore?r.resolveCurrent(!0).fold((()=>hr(s,pr(n,i),mr.Ok)),(e=>hr(s,l(e),mr.Ignore))):c===mr.Repair&&((a,s)=>{const c=s=>{hr(a,yr({issue:e,summaryLabel:t},r,o,w.some(s),n,i),mr.Repair)},u=()=>r.resolveCurrent(!1).fold((()=>r.scan().fold((()=>hr(a,pr(n,i),mr.Ok)),(e=>hr(a,l(e),mr.Ignore)))),(e=>hr(a,l(e),mr.Ignore)));s.each((t=>{t.repair(e.element,e.id,((e,t)=>{const r={},o={};return((e,t,r,o)=>{$e(e,((e,a)=>{(t(e,a)?r:o)(e,a)}))})(e,t,Ge(r),Ge(o)),{t:r,f:o}})(a.getData(),((t,r)=>{return o=r,""===(a=e.id)||o.length>=a.length&&o.substr(0,0+a.length)===a;var o,a})).t,(e=>e.fold(c,u)))}))})(s,a)},u=t=>r=>t.each((t=>{t.onChange.each((t=>t(r,r.getData(),e))),t.shouldDisableRepair.each((t=>{const o=t(r.getData(),e);r.setEnabled(mr.Repair,!o)}))})),d=(r,o,a)=>{const l="warning"===(d=e.severity)?"warn":d;var d;const p=o.map((()=>({type:"panel",classes:["accessibility-issue__repair"],items:o.map((e=>e.items)).getOr([])}))).toArray();return{title:He("a11y.widget.title"),body:{type:"panel",classes:["tox-accessibility-issue",`accessibility-issue--${l}`],items:[{type:"panel",classes:["accessibility-issue__header"],items:[{type:"htmlpanel",html:`<h1>${t}</h1>`,presets:"presentation"},{type:"button",name:mr.Prev,text:He("a11y.widget.previous"),icon:"action-prev",borderless:!0},{type:"button",name:mr.Next,text:He("a11y.widget.next"),icon:"action-next",borderless:!0}]},{type:"htmlpanel",html:lr(n,e.description,e.severity,"help",s(e.id)),presets:"presentation"},...p]},buttons:[{type:"custom",name:mr.Ignore,text:He("a11y.widget.ignore")},{type:"custom",name:mr.Repair,text:He("a11y.widget.repair"),enabled:!a,primary:!0}],initialData:{...o.map((e=>e.initialData)).getOr({})},onAction:c(r),onChange:u(r),onClose:i}};return o(e.id).fold((()=>d(w.none(),w.none(),!0)),(t=>{const r=((e,t,r)=>{const o=t.element;return r.fold((()=>e.ui.map((e=>e(t.id,o)))),(r=>e.ui.map((e=>{const a=e(t.id,o);return{items:a.items.concat([(n=r.errorMessage,{type:"htmlpanel",html:`<div class="tox-form__group--error">${n}</div>`})]),initialData:{...a.initialData,...r.repairErrorData}};var n}))))})(t,e,a),o=t.shouldDisableRepair.bind((t=>r.map((r=>t(r.initialData,e))))).getOr(!1);return d(w.some(t),r,o)}))},gr=(e,t)=>{J(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},vr=(e,t)=>{const r=(e=>w.from(e.dom.nextSibling).map(H))(e);r.fold((()=>{J(e).each((e=>{wr(e,t)}))}),(e=>{gr(e,t)}))},wr=(e,t)=>{e.dom.appendChild(t.dom)},br=(e,t)=>{T(t,(t=>{wr(e,t)}))},fr=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},kr=e=>{const t=ee(e);var r,o;t.length>0&&(r=e,T(o=t,((e,t)=>{const a=0===t?r:o[t-1];vr(a,e)}))),fr(e)},xr=e=>e.dom.innerHTML,Ar=e=>{const t=t=>t(e),r=d(e),o=()=>a,a={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:v,isError:g,map:t=>Tr.value(t(e)),mapError:o,bind:t,exists:t,forall:t,getOr:r,or:o,getOrThunk:r,orThunk:o,getOrDie:r,each:t=>{t(e)},toOptional:()=>w.some(e)};return a},Cr=e=>{const t=()=>r,r={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:g,isError:v,map:t,mapError:t=>Tr.error(t(e)),bind:t,exists:g,forall:v,getOr:p,or:p,getOrThunk:y,orThunk:y,getOrDie:(o=String(e),()=>{throw new Error(o)}),each:u,toOptional:w.none};var o;return r},Tr={value:Ar,error:Cr,fromOption:(e,t)=>e.fold((()=>Cr(t)),Ar)},Dr=e=>((e,t)=>H(e.dom.cloneNode(!0)))(e),Ir=(e,t,r)=>Tr.error({errorMessage:t(e),repairErrorData:r}),_r=(e,t,r,o,a,n)=>0===t.length?Ir(o,n,{}):Sr(e,t,r,a,n),Sr=(e,t,r,o,a)=>t===r?Ir(o,a,{}):Tr.value(e),Nr=e=>{const t=e.split("/");return w.from(t.pop())},Or=(e,t,r,o,a,n)=>{const i=Ve(e,"src").bind(Nr).getOr(""),s=r[`${t}_textinput`];return r[`${t}_checkbox`]?(e=>(je(e,"alt",""),je(e,"role","presentation"),Tr.value(e)))(e):_r(e,s,i,o,a,n).map((e=>(je(e,"alt",s),"presentation"===Be(e,"role")&&Fe(e,"role"),e)))},Er=e=>e.dom.textContent,Rr=(e,t,r,o,a,n)=>{const i=Be(e,"summary");return _r(e,r[t],i,o,a,n).map((o=>{const a=me(e,"caption").fold((()=>M("caption")),(e=>{var t;return(t=e).dom.textContent="",T(ee(t),(e=>{fr(e)})),e}));return((e,t)=>{e.dom.textContent=t})(a,r[t]),((e,t)=>{te(e).fold((()=>{wr(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))})(o,a),o}))},Wr=e=>`${e}_checkbox`,Mr=e=>`${e}_textinput`,Hr=(e,t)=>{const r=t.id,o=!0===e[Wr(r)],a=e[Mr(r)].length>0;return!o&&!a},qr=(e,t,r)=>{const o=r.id,a=Wr(o),n=Mr(o);!0===t[a]?(e.setEnabled(n,!1),e.setEnabled(mr.Repair,!0)):(e.setEnabled(n,!0),t[n].length>0?(e.setEnabled(mr.Repair,!0),e.setEnabled(a,!0)):(e.setEnabled(a,!0),e.setEnabled(mr.Repair,!1)))},Pr=(e,t)=>{const r=ur(Mr(t),He((o="a11y.i1.repair.info",e?`${o}.decorativeAllowed`:`${o}.decorativeNotAllowed`)));var o;return e?[dr(Wr(t),He("a11y.i1.repair.checkboxlabel"),He("a11y.i1.repair.checkboxtext")),r]:[r]},$r=(e,t,r)=>{const o=Be(e,"alt"),a=t?{[Wr(r)]:!1}:{};return{[Mr(r)]:o||"",...a}},Gr=e=>{const t=Ee(e),r=(t,r)=>{e.undoManager.transact((()=>{const o=r();o.isValue()&&(e=>{e.dispatch("A11ycheckRepair")})(e),t(o)}))},o={H93:w.some({ui:w.some(((e,t)=>({items:[cr(e,He("a11y.h93.repair.info"),[{text:"a11y.h93.repair.deduplicate.others",value:"others"},{text:"a11y.h93.repair.deduplicate.this",value:"this"},{text:"a11y.h93.repair.deduplicate.all",value:"all"}],He)],initialData:{[e]:""}}))),repair:(t,o,a,n)=>{r(n,(()=>((e,t,r,o)=>{const a=r[t],n="all"===a||"this"===a;if("all"===a||"others"===a){const t=Be(e,"id"),r=o.getBody(),a=H(r),n=ue(a,`*[id="${t}"]`),i=D(n,(t=>!$(t,e)));T(i,(e=>{Fe(e,"id")}))}return n&&Fe(e,"id"),Tr.value(e)})(t,o,a,e)))},shouldDisableRepair:w.none(),onChange:w.none()}),I1:w.some({ui:w.some(((e,r)=>({items:Pr(t,e),initialData:$r(r,t,e)}))),repair:(e,t,o,a)=>{r(a,(()=>Or(e,t,o,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",He)))},shouldDisableRepair:t?w.some(Hr):w.none(),onChange:t?w.some(qr):w.none()}),I2:w.some({ui:w.some(((e,r)=>({items:Pr(t,e),initialData:$r(r,t,e)}))),repair:(e,t,o,a)=>{r(a,(()=>Or(e,t,o,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",He)))},shouldDisableRepair:t?w.some(Hr):w.none(),onChange:t?w.some(qr):w.none()}),I3:w.some({ui:w.some(((e,t)=>({items:Pr(!1,e),initialData:$r(t,!1,e)}))),repair:(e,t,o,a)=>{r(a,(()=>((e,t,r,o,a)=>{const n=r[`${t}_textinput`];return((e,t,r,o,a,n=100)=>{const i=`${t}_textinput`;return r.length>n?Ir([o,r.length],a,{[i]:r}):Tr.value(e)})(e,t,n,o,a,100).map((e=>(je(e,"alt",n),e)))})(e,t,o,"a11y.i3.repair.error",He)))},shouldDisableRepair:w.none(),onChange:w.none()}),T1:w.some({ui:w.some(((e,t)=>({items:[ur(e,He("a11y.t1.repair.info"))],initialData:{[e]:""}}))),repair:(e,t,o,a)=>{r(a,(()=>Rr(e,t,o,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",He)))},shouldDisableRepair:w.none(),onChange:w.none()}),T2:w.some({ui:w.some(((e,t)=>({items:[ur(e,He("a11y.t2.repair.info"))],initialData:{[e]:""}}))),repair:(e,t,o,a)=>{r(a,(()=>((e,t,r,o,a,n)=>{const i=ye(e,"caption").filter(F).map(Er).getOr("");return _r(e,r[t],i,"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate",n).map((o=>(je(e,"summary",r[t]),o)))})(e,t,o,0,0,He)))},shouldDisableRepair:w.none(),onChange:w.none()}),T3:w.some({ui:w.some(((e,t)=>{const r=me(t,"caption").fold(d(""),xr);return{items:[ur(e,He("a11y.t1.repair.info"))],initialData:{[e]:r}}})),repair:(e,t,o,a)=>{r(a,(()=>Rr(e,t,o,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",He)))},shouldDisableRepair:w.none(),onChange:w.none()}),T4A:w.none(),T4B:w.some({ui:w.some(((e,t)=>({items:[cr(e,He("a11y.t4b.repair.info"),[{text:"a11y.t4c.repair.header.row",value:"row"},{text:"a11y.t4c.repair.header.col",value:"col"}],He)],initialData:{[e]:""}}))),repair:(e,t,o,a)=>{r(a,(()=>((e,t,r)=>{let o=[];if("row"===r[t]){const t=H(e.dom.rows[0]);o=ce(t,"td")}else"col"===r[t]&&T(e.dom.rows,(e=>{me(H(e),"td").each((e=>{o.push(e)}))}));return T(o,(e=>{const t=M("th");T(e.dom.attributes,(r=>{Ve(e,r.name).each((e=>je(t,r.name,e)))})),t.dom.innerHTML=e.dom.innerHTML,vr(e,t),fr(e)})),Tr.value(e)})(e,t,o)))},shouldDisableRepair:w.some(((e,t)=>!ct(t.element,"td"))),onChange:w.none()}),T4C:w.some({ui:w.some(((e,t)=>({items:[cr(e,He("a11y.t4c.repair.info"),[{text:"a11y.t4c.repair.scope.row",value:"row"},{text:"a11y.t4c.repair.scope.col",value:"col"},{text:"a11y.t4c.repair.scope.rowgroup",value:"rowgroup"},{text:"a11y.t4c.repair.scope.colgroup",value:"colgroup"}],He)],initialData:{[e]:""}}))),repair:(e,t,o,a)=>{r(a,(()=>((e,t,r)=>(je(e,"scope",r[t]),Tr.value(e)))(e,t,o)))},shouldDisableRepair:w.none(),onChange:w.none()}),D1:w.some({ui:w.some(((e,t)=>({items:[cr(e,He("a11y.d1.repair.info"),[{text:"a11y.d1.repair.block.h1",value:"h1"},{text:"a11y.d1.repair.block.h2",value:"h2"},{text:"a11y.d1.repair.block.h3",value:"h3"},{text:"a11y.d1.repair.block.h4",value:"h4"},{text:"a11y.d1.repair.block.h5",value:"h5"},{text:"a11y.d1.repair.block.h6",value:"h6"}],He)],initialData:{[e]:""}}))),repair:(e,t,o,a)=>{r(a,(()=>((e,t,r)=>{const o=Y(e),a=M(r[t],o.dom),n=ee(e),i=C(n,Dr);br(a,i);const s=ue(a,"b,strong");return T(s,kr),gr(e,a),fr(e),Tr.value(a)})(e,t,o)))},shouldDisableRepair:w.none(),onChange:w.none()}),D2:w.none(),D3:w.some({ui:w.none(),repair:(e,t,o,a)=>{r(a,(()=>(e=>{const t=O(Z(e));return S(t,X("a")).fold((()=>Tr.error({errorMessage:"Failed to find previous link",repairErrorData:{}})),(r=>{for(const e of t){if($(e,r))break;U(e)&&fr(e)}const o=ee(e);return br(r,o),fr(e),Tr.value(r)}))})(e)))},shouldDisableRepair:w.none(),onChange:w.none()})};return e=>o.hasOwnProperty(e)?o[e]:w.none()},Lr=()=>ue(le(H(document)),".tox-dialog");tinymce.PluginManager.requireLangPack("a11ychecker","ar,bg_BG,ca,cs,da,de,el,es,eu,fa,fi,fr_FR,he_IL,hi,hr,hu_HU,id,it,ja,kk,ko_KR,ms,nb_NO,nl,pl,pt_PT,pt_BR,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,vi,zh_TW,zh_CN"),tinymce.PluginManager.add("a11ychecker",((e,t)=>{if(((e,t)=>!!e&&-1===((e,t)=>{const r=we(e.major,t.major);if(0!==r)return r;const o=we(e.minor,t.minor);if(0!==o)return o;const a=we(e.patch,t.patch);return 0!==a?a:0})((e=>fe((e=>[e.majorVersion,e.minorVersion].join(".").split(".").slice(0,3).join("."))(e)))(e),fe(t)))(tinymce,"6.8.0"))return console.error('The "a11ychecker" plugin requires at least version 6.8.0 of TinyMCE.'),{};((e,t)=>{const o=e.options.register;o("a11ychecker_css_url",{processor:"string",default:t+"/css/annotations.css"}),o("a11ychecker_allow_decorative_images",{processor:"boolean"});const a=[Ae(),Ce(),Te()];o("a11ychecker_level",{processor:e=>r(e)&&x(a,e),default:Ce()});const n=[ke(),xe()];o("a11ychecker_html_version",{processor:e=>r(e)&&x(n,e),default:xe()}),o("a11ychecker_issue_url_callback",{processor:"function",default:e=>`https://www.tiny.cloud/docs/tinymce/${tinymce.majorVersion}/a11ychecker/#${e}`}),o("a11ychecker_ignored_rules",{processor:"string",default:""}),o("a11ychecker_filter_issue",{processor:"function",default:v})})(e,t);const o=nr(e),a=Ie(e),n=((e,t)=>{const r=R(),o=R(),a=()=>{(e=>{e.dispatch("A11ycheckStop")})(e),o.get().each((e=>e.unbind())),o.clear(),r.clear(),t.clear()},n=()=>{const n=((e,t,r,o,a)=>t.scan().fold((()=>e(pr(o,a))),(n=>e(yr(n,t,r,w.none(),o,a)))))((t=>{const r=Lr(),a=e.windowManager.open(t,{inline:"toolbar",ariaAttrs:!0});var n,i;return(n=r,i=Lr(),S(i,(e=>!A(n,(t=>$(t,e)))))).each((t=>{(t=>{o.set(ie(t,"click",(t=>{ge(t.target,"a.tox-button--more-info-a11ychecker-link").each((t=>{(e=>{e.dispatch("A11ycheckShowDetails")})(e)}))})))})(t)})),a}),t,Gr(e),e,a);r.set(n)},i=e=>e.close();return e.ui.registry.addButton("a11ycheck",{tooltip:He("a11y.control.tooltip"),icon:"accessibility-check",onAction:n}),e.ui.registry.addMenuItem("a11ycheck",{icon:"accessibility-check",text:He("a11y.control.menutext"),onAction:n}),()=>r.get().fold(n,i)})(e,o);return e.on("init",(()=>{const t="a11ychecker/css/annotations.css";if(tinymce.Resource.has(t)){const r=tinymce.Resource.get(t);e.dom.styleSheetLoader.loadRawCss(t,r)}else e.dom.loadCSS(a)})),{getReport:o.getReport,toggleaudit:n}}))}();